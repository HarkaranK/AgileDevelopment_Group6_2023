<!DOCTYPE html>
<html>

<head>
    <title>Welcome to Quizzes</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
</head>
{% extends 'base.html' %}

{% block title %}Welcome to Quizzes{% endblock %}

{% block extra_head %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<script>
    function showQuestions(quizIndex, event) {
        event.preventDefault();
        const questionsContainers = document.querySelectorAll(".questions-container");
        questionsContainers.forEach((container, index) => {
            if (index === parseInt(quizIndex)) {
                if (container.style.display !== "block") {
                    container.style.display = "block";
                } else {
                    container.style.display = "none";
                }
            } else {
                container.style.display = "none";
            }
        });
    }
</script>
<div class="content">
    <aside class="sidebar">
        <h2>My Quizzes</h2>
        <ul class="quizzes">
            <!-- Add quizzes as list items -->
            {% for quiz in user_quizzes %}
            <li>
                <a href="#" onclick="showQuestions('{{ loop.index0 }}', event)">{{ quiz.quiz_name }}</a>
                </form>
            </li>
            {% endfor %}
        </ul>
    </aside>

    <div class="main">
        {% for quiz, questions in user_quizzes_questions %}
        <div class="card">
            <h5 class="card-header">
                <a href="#" onclick="showQuestions('{{ loop.index0 }}', event)">{{ quiz.title }}</a>
            </h5>
            <div class="questions-container" style="display: none;" id="questions-container-{{ loop.index0 }}">
                <div class="card-body">
                    {% for question_obj in questions %}
                    <p>{{ question_obj.question.question }}</p>
                    <ul>
                        {% for answer in question_obj.answers %}
                        <li>{{ answer.answer }}</li>
                        {% endfor %}
                    </ul>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}

        <div class="buttons">
            <button>Save</button>
            <button>History</button>
            <a href="{{ url_for('create_quiz_page') }}" class="button-link">
                <button>Create Quiz</button>
            </a>
            <button>Delete</button>
        </div>
    </div>
</div>
{% endblock %}

</html>